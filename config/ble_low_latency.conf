# ===== Low-Latency BLE profile (all halves) =====
# 7.5 ms – 15 ms / latency 0
CONFIG_BT_PERIPHERAL_PREF_MIN_INT=6    # 6 *1.25 ms = 7.5 ms
CONFIG_BT_PERIPHERAL_PREF_MAX_INT=12   # 15 ms
CONFIG_BT_PERIPHERAL_PREF_LATENCY=0
CONFIG_BT_GAP_AUTO_UPDATE_CONN_PARAMS=y

# 2 M PHY を許可（nRF52840 は対応）
CONFIG_BT_CTLR_PHY_2M=y

# ZMK 固有: 接続速度を落とさない
CONFIG_ZMK_BLE_KEEP_CONN=y         # v0.2 以降
CONFIG_ZMK_BLE_FAST_CONN_TIMEOUT=0 # 0 = 常時 fast

# ----- macOS Low-Latency BLE profile -----

# 11.25–15 ms / latency 0
CONFIG_BT_PERIPHERAL_PREF_MIN_INT=9     # 9×1.25 ms = 11.25 ms
CONFIG_BT_PERIPHERAL_PREF_MAX_INT=12    # 15 ms
CONFIG_BT_PERIPHERAL_PREF_LATENCY=0

# 2 M PHY & Data Length Extension
CONFIG_BT_CTLR_PHY_2M=y
CONFIG_BT_CTLR_DATA_LENGTH_MAX=251

# macOS の省電力で 30 ms に戻されないよう固定
CONFIG_ZMK_BLE_KEEP_FAST_CONN=y
CONFIG_ZMK_BLE_FAST_CONN_TIMEOUT=0
